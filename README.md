# Тестовое задание для компании "РА Дельта"

## Задача и требования

Требуется реализовать web-приложение - аналог bit.ly и подобных систем.
То есть для длинных урлов создает их короткие аналоги <domain>/<subpart>.

Приложение содержит одну страницу на которой:
- Форма, в которой можно ввести URL, который должен быть сокращен.
- Табличка со всеми сокращенными URL (с пагинацией) данного пользователя с числом переходов по каждому URL.

Обязательные требования:
- Приложение НЕ содержит авторизации.
- Приложение отслеживает пользователей по сессии, т.е. у каждого пользователя свой набор редиректов (правил).
- Данные хранятся в MySQL.
- При заходе на сжатый URL приложение редиректит (серверный редирект) на соответствующий URL (который был сжат).
- Пользователь по желанию может указать свой <subpart>. Если такой <subpart> уже используется, нужно сообщить об этом пользователю.
- Реализация на выбор: на Django или на FastAPI (с валидацией через pydantic). 
- Кэширование редиректов в редисе. Требуется сохранить в редис маппинг сокращенного урла с полным адресом, а не объект правила редиректа полностью. НЕ ИСПОЛЬЗОВАТЬ кэширование представлений, QuerySet’ов, и иные высокоуровневые способы, которые подразумевают лишь установку пары атрибутов в настройке приложения.

Очистка старых правил по расписанию:
  - удаление записей из MySQL; 
  - очистка редиректов из Redis.

Особое внимание нужно уделить:
- Логированию.
- Обработке ошибок.
- Чистоте и понятности кода.
- Документации к основным методам.

Плюсом будет:
В случае выбора Django - реализация через DjangoRestFramework.
Использование асинхронности (особенно в случае реализации через FastAPI).
Докеризация результата (docker-compose up для запуска сервиса и всех зависимостей).
Описание API через Swagger.
Покрыть API тестами.

### Запуск через docker-compose

Клонируем репозиторий
```sh
git clone https://github.com/tdeni/url-shortener.git
```

Необходимо создать .env файл
```sh
secret_key=any_key
debug=True
database=database_name
db_user=user
db_password=password
db_root_password=root_password
db_host=mysql
db_port=3306
redis_host=redis
redis_port=6379
cleanup_interval=1
mysql_max_age=2
```

Запуск сервиса
```sh
docker compose up --build
```
